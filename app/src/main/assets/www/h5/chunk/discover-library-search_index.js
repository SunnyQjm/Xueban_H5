(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{"645":function(e,t,o){},"702":function(e,t,o){"use strict";o.r(t);var r=o(3),n=o(278),a=o(39),i=o(16),c=o(29),p=o(2),s=o(8),l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},h={"dispatchSearch":function dispatchSearch(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(r){return new Promise(function(n,a){e&&(r({"type":p.a.GLOBAL.LIBRARY_SEARCH_BOOK_BEGIN,"data":{"page":t,"confirm":o}}),s.a.searchBook(e,t).then(function(e){r({"type":p.a.GLOBAL.LIBRARY_SEARCH_BOOK_SUCCESS,"data":l({},e,{"page":t})}),n(e)}).catch(function(e){console.log(e),r({"type":p.a.GLOBAL.LIBRARY_SEARCH_BOOK_FAIL}),a(e)}))})}}},u=o(279),b=(o(645),o(296)),y=o.n(b),f=o(19),d=o(277),g=function(){function defineProperties(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,o){return t&&defineProperties(e.prototype,t),o&&defineProperties(e,o),e}}(),v=function get(e,t,o){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var n=Object.getPrototypeOf(e);return null===n?void 0:get(n,t,o)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(o):void 0},O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e};var P=function(e){function DiscoverLibrarySearchPage(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,DiscoverLibrarySearchPage);var t=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(DiscoverLibrarySearchPage.__proto__||Object.getPrototypeOf(DiscoverLibrarySearchPage)).call(this,e));return t.config={},t.value="",t.handleOnInputChange=y()(t.handleOnInputChange,500).bind(t),t.onLoadMore=t.onLoadMore.bind(t),t.handleOnClick=t.handleOnClick.bind(t),t.catXbBaseScrollWrapperComponent=t.catXbBaseScrollWrapperComponent.bind(t),t}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(DiscoverLibrarySearchPage,c["a"]),g(DiscoverLibrarySearchPage,[{"key":"onLoadMore","value":function onLoadMore(e){var t=this,o=this.nextPage();this.props.dispatchSearch(this.value,o,!1).then(function(t){e(t.searchResult.totalPage===o+1)}).catch(function(){t.backPage(),e()})}},{"key":"handleOnInputChange","value":function handleOnInputChange(e,t){this.resetPage(),this.xbBaseScrollWrapperComponent&&this.xbBaseScrollWrapperComponent.resetLoadStatus(),this.value=e,this.props.dispatchSearch(this.value,this.nextPage(),t)}},{"key":"catXbBaseScrollWrapperComponent","value":function catXbBaseScrollWrapperComponent(e){this.xbBaseScrollWrapperComponent=e}},{"key":"handleOnClick","value":function handleOnClick(e){f.a.navigateTo(f.a.Pages.DiscoverLibraryBookDetailPage,{"id":e.macrNo})}},{"key":"render","value":function render(){var e=this,t=this.props.books,o=d.a.Images.img_noresult;return r.k.createElement(u.c,{"xbBarProps":{"title":"图书检索","leftIconVisible":!0},"xbScrollViewProps":{"enableRefresh":!1,"enableLoadMore":!0,"onLoadMore":this.onLoadMore,"empty":t.length<=0,"showBackTop":!0,"emptyImg":o,"emptyText":"没有搜索结果"},"ref":this.catXbBaseScrollWrapperComponent},r.k.createElement(u.B,{"placeholder":"检索图书","autoFocus":!0,"onChange":this.handleOnInputChange}),t.map(function(t){return r.k.createElement(u.s,{"bookInfo":t,"key":t.macrNo,"type":"searchResult","onClick":e.handleOnClick})}))}},{"key":"componentDidMount","value":function componentDidMount(){v(DiscoverLibrarySearchPage.prototype.__proto__||Object.getPrototypeOf(DiscoverLibrarySearchPage.prototype),"componentDidMount",this)&&v(DiscoverLibrarySearchPage.prototype.__proto__||Object.getPrototypeOf(DiscoverLibrarySearchPage.prototype),"componentDidMount",this).call(this)}},{"key":"componentDidShow","value":function componentDidShow(){v(DiscoverLibrarySearchPage.prototype.__proto__||Object.getPrototypeOf(DiscoverLibrarySearchPage.prototype),"componentDidShow",this)&&v(DiscoverLibrarySearchPage.prototype.__proto__||Object.getPrototypeOf(DiscoverLibrarySearchPage.prototype),"componentDidShow",this).call(this)}},{"key":"componentDidHide","value":function componentDidHide(){v(DiscoverLibrarySearchPage.prototype.__proto__||Object.getPrototypeOf(DiscoverLibrarySearchPage.prototype),"componentDidHide",this)&&v(DiscoverLibrarySearchPage.prototype.__proto__||Object.getPrototypeOf(DiscoverLibrarySearchPage.prototype),"componentDidHide",this).call(this)}}]),DiscoverLibrarySearchPage}();P.defaultProps={},P=n.a([Object(a.b)(function mapStateToProps(e){return O({},e.DiscoverLibrarySearchReducer.toJS())},function mapDispatchToProps(e){return O({},Object(i.b)(h,e))})],P);t.default=P}}]);