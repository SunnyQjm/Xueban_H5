(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"611":function(e,t,o){},"687":function(e,t,o){"use strict";o.r(t);var n=o(3),r=o(278),a=o(660),c=o(26),s=o(659),l=o(658),i=o(39),u=o(16),p=o(29),h=o(2),d=o(8),f={"dispatchGetAllScores":function dispatchGetAllScores(e){return function(t){return new Promise(function(o,n){t({"type":h.a.GLOBAL.GET_ALL_SCORES_BEGIN}),d.a.getAllScores(e,t).then(function(n){t({"type":h.a.GLOBAL.GET_ALL_SCORES_SUCCESS,"data":n,"forceNetwork":e}),o(n)}).catch(function(e){console.log(e),t({"type":h.a.GLOBAL.GET_ALL_SCORES_FAIL}),n(e)})})}},"dispatchChangeMode":function dispatchChangeMode(e){return function(t){t({"type":h.a.GLOBAL.CHANGE_SCORE_DISPLAY_MODE,"data":e})}},"dispatchChangeSelectState":function dispatchChangeSelectState(e,t){return function(o){o({"type":h.a.GLOBAL.CHANGE_SCORE_SELECT_STATE,"data":{"score":e,"selected":t}})}},"dispatchSearchScore":function dispatchSearchScore(e){return function(t){t({"type":h.a.GLOBAL.SEARCH_SCORE,"data":e})}}},S=o(279),g=(o(611),o(277)),m=function(){function defineProperties(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,o){return t&&defineProperties(e.prototype,t),o&&defineProperties(e,o),e}}(),C=function get(e,t,o){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:get(r,t,o)}if("value"in n)return n.value;var a=n.get;return void 0!==a?a.call(o):void 0},y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e};var O=function(e){function CourseScorePage(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,CourseScorePage);var t=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(CourseScorePage.__proto__||Object.getPrototypeOf(CourseScorePage)).call(this,e));return t.config={},t.state={"searchValue":""},t.handleOnRefresh=t.handleOnRefresh.bind(t),t.handleOnSelectStateChange=t.handleOnSelectStateChange.bind(t),t.handleOnMenuItemClick=t.handleOnMenuItemClick.bind(t),t.onSearchBarChange=t.onSearchBarChange.bind(t),t}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(CourseScorePage,p["a"]),m(CourseScorePage,[{"key":"componentWillMount","value":function componentWillMount(){var e=this;this.props.dispatchGetAllScores(!1).then(function(){e.props.dispatchGetAllScores(!0)})}},{"key":"handleOnRefresh","value":function handleOnRefresh(e){this.props.dispatchGetAllScores(!0).then(function(){e()}).catch(function(){e()})}},{"key":"handleOnMenuItemClick","value":function handleOnMenuItemClick(e){this.props.dispatchChangeMode(e)}},{"key":"handleOnSelectStateChange","value":function handleOnSelectStateChange(e,t){this.props.dispatchChangeSelectState(e,t.selected)}},{"key":"onSearchBarChange","value":function onSearchBarChange(e){this.props.dispatchSearchScore(e)}},{"key":"render","value":function render(){var e=this,t=this.props,o=t.mode,r=t.scores,i=t.thisTermScores,u=t.menuList,p=t.gpa,h=t.weightedAverageScore,d=t.obligatoryWeightedAverageScore,f=t.showSearchResult,m=t.searchResult,C=t.showLoading,y=t.empty,O=g.a.Images.icon_jidian;return n.k.createElement(a.a,null,n.k.createElement(S.c,{"xbBarProps":{"title":u[o],"leftIconVisible":!0},"xbScrollViewProps":{"enableRefresh":0===o||3===o,"onRefresh":this.handleOnRefresh,"showBackTop":!0,"enableLoadMore":!1,"showLoading":C,"backTopBtnVerticalMargin":140,"empty":y}},(0===o||3===o)&&n.k.createElement(S.B,{"placeholder":"在此输入要检索的成绩","onChange":this.onSearchBarChange}),!f&&0===o&&i.map(function(e){return n.k.createElement(S.z,{"score":e,"key":e.CourseId})}),!f&&1===o&&n.k.createElement(a.a,null,n.k.createElement(c.a,{"className":"score-gpa"},n.k.createElement(c.a,{"className":"score-gpa-value"},n.k.createElement(s.a,{"className":"score-gpa-value-image","src":O}),n.k.createElement(l.a,{"className":"score-gpa-valule-text"},p)),n.k.createElement(l.a,{"className":"gpa-description"},"使用",n.k.createElement(l.a,{"className":"clickableText"},"大工算法"),"计算")),n.k.createElement(c.a,{"className":"score-course-add-delete-bar"},"添加删除科目"),r.map(function(t){return n.k.createElement(S.w,{"key":t.CourseId,"showIcon":!1,"title":t.Name+" ( "+t.Type+", "+t.Score+" ) ","mode":1,"selected":t.selected,"selectedId":t.CourseId,"onSelectedChange":e.handleOnSelectStateChange.bind(e,t)})})),!f&&2===o&&n.k.createElement(a.a,null,n.k.createElement(c.a,{"className":"score-gpa"},n.k.createElement(c.a,{"className":"score-gpa-value"},n.k.createElement(s.a,{"className":"score-gpa-value-image","src":O})),n.k.createElement(c.a,null,n.k.createElement(l.a,{"className":"weighted-average-text"},"全部加权："+h),n.k.createElement(l.a,{"className":"weighted-average-text"},"必修加权："+d))),n.k.createElement(c.a,{"className":"score-course-add-delete-bar"},"添加删除科目"),r.map(function(t){return n.k.createElement(S.w,{"key":t.CourseId,"showIcon":!1,"title":t.Name+" ( "+t.Type+", "+t.Score+" ) ","mode":1,"selected":t.selected,"selectedId":t.CourseId,"onSelectedChange":e.handleOnSelectStateChange.bind(e,t)})})),!f&&3===o&&r.map(function(e){return n.k.createElement(S.z,{"score":e,"key":e.CourseId})}),f&&m.map(function(e){return n.k.createElement(S.z,{"score":e,"key":e.CourseId})})),n.k.createElement(S.o,{"onMenuItemClick":this.handleOnMenuItemClick,"menuList":u}))}},{"key":"componentDidMount","value":function componentDidMount(){C(CourseScorePage.prototype.__proto__||Object.getPrototypeOf(CourseScorePage.prototype),"componentDidMount",this)&&C(CourseScorePage.prototype.__proto__||Object.getPrototypeOf(CourseScorePage.prototype),"componentDidMount",this).call(this)}},{"key":"componentDidShow","value":function componentDidShow(){C(CourseScorePage.prototype.__proto__||Object.getPrototypeOf(CourseScorePage.prototype),"componentDidShow",this)&&C(CourseScorePage.prototype.__proto__||Object.getPrototypeOf(CourseScorePage.prototype),"componentDidShow",this).call(this)}},{"key":"componentDidHide","value":function componentDidHide(){C(CourseScorePage.prototype.__proto__||Object.getPrototypeOf(CourseScorePage.prototype),"componentDidHide",this)&&C(CourseScorePage.prototype.__proto__||Object.getPrototypeOf(CourseScorePage.prototype),"componentDidHide",this).call(this)}}]),CourseScorePage}();O.defaultProps={},O=r.a([Object(i.b)(function mapStateToProps(e){return y({},e.CourseScoreReducer.toJS())},function mapDispatchToProps(e){return y({},Object(u.b)(f,e))})],O);t.default=O}}]);