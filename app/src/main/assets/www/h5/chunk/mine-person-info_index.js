(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{"579":function(e,t,n){},"631":function(e,t,n){"use strict";n.r(t);var o=n(3),a=n(230),r=n(6),i=n(596),s=n(17),c=n(595),l=n(594),p=n(27),f=n(13),u=n(20),d=n(9),m=n(2),h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},g={"dispatchGetPersonInfo":function dispatchGetPersonInfo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(t){return new Promise(function(n,o){t({"type":m.a.GLOBAL.GET_PERSON_INFO_BEGIN});var a=void 0,r=!1;e?a=d.a.getTargetUserInfo(e):(r=!0,a=d.a.getPersonInfo(t)),a.then(function(e){t({"type":m.a.GLOBAL.GET_PERSON_INFO_SUCCESS,"data":{"personInfo":r?e.personInfo:e.socialInfo,"isSelf":r}}),n(e)}).catch(function(e){console.log(e),t({"type":m.a.GLOBAL.GET_PERSON_INFO_FAIL}),o(e)})})}},"dispatchStar":function dispatchStar(e){return function(t){return new Promise(function(n,o){t({"type":m.a.GLOBAL.PERSON_CENTER_STAR_BEGIN}),d.a.star(e.id,e.isStared?"del":"add").then(function(o){t({"type":m.a.GLOBAL.PERSON_CENTER_STAR_SUCCESS,"data":h({},o,{"id":e.id})}),n(o)}).catch(function(e){t({"type":m.a.GLOBAL.PERSON_CENTER_STAR_FAIL}),o(e)})})}}},P=n(231),_=(n(579),n(229)),v=n(28),I=n(15),y=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),b=function get(e,t,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var a=Object.getPrototypeOf(e);return null===a?void 0:get(a,t,n)}if("value"in o)return o.value;var r=o.get;return void 0!==r?r.call(n):void 0},O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};var S=function(e){function PersonInfoPage(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,PersonInfoPage);var t=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(PersonInfoPage.__proto__||Object.getPrototypeOf(PersonInfoPage)).call(this,e));return t.config={},t.getDetailInfo=t.getDetailInfo.bind(t),t.handleSignClick=t.handleSignClick.bind(t),t.handleAnonymousPrivateLetter=t.handleAnonymousPrivateLetter.bind(t),t.handlePrivateLetter=t.handlePrivateLetter.bind(t),t.handleStar=t.handleStar.bind(t),t.handleOnImageClick=t.handleOnImageClick.bind(t),t.isSelf=t.isSelf.bind(t),t}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(PersonInfoPage,u["a"]),y(PersonInfoPage,[{"key":"componentWillMount","value":function componentWillMount(){"true"!==this.$router.params.isOther?this.props.dispatchGetPersonInfo(null):this.props.dispatchGetPersonInfo(this.$router.params.userId)}},{"key":"handleOnImageClick","value":function handleOnImageClick(){var e=this,t=this.props.personInfo;this.isSelf()?d.a.updateAvatar().then(function(){e.props.dispatchGetPersonInfo(null)}):t&&t.headImage&&this.previewImage(t.headImage,[t.headImage],0)}},{"key":"isSelf","value":function isSelf(){return!!(this.props.personInfo&&this.props.personInfo.StudentId&&d.a.userInfo&&d.a.userInfo.StudentId)&&this.props.personInfo.StudentId===d.a.userInfo.StudentId}},{"key":"handleStar","value":function handleStar(){this.isSelf()||this.props.dispatchStar(this.props.personInfo)}},{"key":"handlePrivateLetter","value":function handlePrivateLetter(){this.isSelf()||this.notSupport()}},{"key":"handleAnonymousPrivateLetter","value":function handleAnonymousPrivateLetter(){this.isSelf()||this.notSupport()}},{"key":"handleSignClick","value":function handleSignClick(){this.isSelf()&&I.a.navigateTo(I.a.Pages.EditSignPage)}},{"key":"getDetailInfo","value":function getDetailInfo(e){var t=_.a.Images,n=t.discover_classmate_constellation,o=t.discover_classmate_major,a=t.discover_classmate_home,r=t.discover_classmate_rctonline,i=[];return i.push({"icon":n,"value":Object(v.c)(e&&e.birthday?e.birthday:"19961112")}),i.push({"icon":o,"value":e&&e.major?e.major:"网络工程"}),i.push({"icon":a,"value":e&&e.province?e.province:"福建省"}),i.push({"icon":r,"value":Object(v.h)(e&&e.lastActiveTime?e.lastActiveTime:"1997")+"活跃"}),i}},{"key":"render","value":function render(){var e=this.props.personInfo,t=_.a.Images,n=t.logo_header,a=t.discover_classmate_like,p=t.discover_classmate_dislike,f=t.icon_person_info_male,d=t.icon_person_info_female,m=t.discover_classmate_pblcmessage,h=t.discover_classmate_anysmessage,g=t.back,v=this.getDetailInfo(e),I=200;return u.a.isWeapp()?I=200:u.a.isH5()&&(I=180),o.e.createElement(i.a,null,o.e.createElement(P.b,{"title":"","leftIcon":g,"leftIconVisible":!0,"barBg":"transparent"}),o.e.createElement(s.a,{"className":"person-info-avatar-name-gender","style":"margin-top: "+r.a.pxTransform(I)+";"},o.e.createElement(c.a,{"className":"person-info-avatar","src":e.head_img?e.head_img:e.headImage?e.headImage:n,"mode":"aspectFill","onClick":this.handleOnImageClick.bind(this)}),o.e.createElement(s.a,{"className":"person-info-name-gender"},o.e.createElement(c.a,{"className":"person-info-name-gender-image","src":1===e.sex?f:d,"mode":"aspectFit"}),o.e.createElement(l.a,{"className":"person-info-name-gender-text"},e.nickName?e.nickName:e.name?e.name:""))),o.e.createElement(s.a,{"className":"person-info-opt-bar"},o.e.createElement(s.a,{"className":"person-info-opt-bar-view"},o.e.createElement(l.a,null,(e.starsCount?e.starsCount:"0")+"人点赞"),o.e.createElement(c.a,{"className":"person-info-opt-bar-image","src":e.isStared?a:p,"mode":"aspectFit","onClick":this.handleStar}),o.e.createElement(c.a,{"className":"person-info-opt-bar-image","src":m,"mode":"aspectFit","onClick":this.handlePrivateLetter}),o.e.createElement(c.a,{"className":"person-info-opt-bar-image","src":h,"mode":"aspectFit","onClick":this.handleAnonymousPrivateLetter}))),o.e.createElement(s.a,{"className":"person-info-bg"},o.e.createElement(c.a,{"className":"person-info-bg-image","src":"https://lg-h3uzb6rq-1252872558.cos.ap-shanghai.myqcloud.com/default_bg.png","mode":"widthFix"})),o.e.createElement(s.a,{"className":"person-info-description","onClick":this.handleSignClick},e.sign?e.sign:"这个人很懒，什么都没留下～"),o.e.createElement(s.a,{"className":"person-info-detail-info"},v.map(function(e){return o.e.createElement(s.a,{"key":"icon","className":"person-info-detail-info-view"},o.e.createElement(c.a,{"src":e.icon,"className":"person-info-detail-info-image"}),o.e.createElement(l.a,{"className":"person-info-detail-info-text"},e.value))})))}},{"key":"componentDidMount","value":function componentDidMount(){b(PersonInfoPage.prototype.__proto__||Object.getPrototypeOf(PersonInfoPage.prototype),"componentDidMount",this)&&b(PersonInfoPage.prototype.__proto__||Object.getPrototypeOf(PersonInfoPage.prototype),"componentDidMount",this).call(this)}},{"key":"componentDidShow","value":function componentDidShow(){b(PersonInfoPage.prototype.__proto__||Object.getPrototypeOf(PersonInfoPage.prototype),"componentDidShow",this)&&b(PersonInfoPage.prototype.__proto__||Object.getPrototypeOf(PersonInfoPage.prototype),"componentDidShow",this).call(this)}},{"key":"componentDidHide","value":function componentDidHide(){b(PersonInfoPage.prototype.__proto__||Object.getPrototypeOf(PersonInfoPage.prototype),"componentDidHide",this)&&b(PersonInfoPage.prototype.__proto__||Object.getPrototypeOf(PersonInfoPage.prototype),"componentDidHide",this).call(this)}}]),PersonInfoPage}();S.defaultProps={},S=a.a([Object(p.b)(function mapStateToProps(e){return O({},e.PersonInfoReducer.toJS())},function mapDispatchToProps(e){return O({},Object(f.b)(g,e))})],S);t.default=S}}]);