(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{"639":function(e,o,t){},"699":function(e,o,t){"use strict";t.r(o);var r=t(3),n=t(278),i=t(39),a=t(16),c=t(29),p=t(2),s=t(8),l={"dispatchGetBorrowInfo":function dispatchGetBorrowInfo(){return function(e){return new Promise(function(o,t){e({"type":p.a.GLOBAL.LIBRARY_GET_BOOK_INFOS_BEGIN}),s.a.getBorrowInfo().then(function(t){e({"type":p.a.GLOBAL.LIBRARY_GET_BOOK_INFOS_SUCCESS,"data":t}),o(t)}).catch(function(o){console.log(o),t(o),e({"type":p.a.GLOBAL.LIBRARY_GET_BOOK_INFOS_FAIL})})})}}},u=t(279),y=(t(639),t(19)),f=t(277),b=t(660),h=function(){function defineProperties(e,o){for(var t=0;t<o.length;t++){var r=o[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,o,t){return o&&defineProperties(e.prototype,o),t&&defineProperties(e,t),e}}(),g=function get(e,o,t){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,o);if(void 0===r){var n=Object.getPrototypeOf(e);return null===n?void 0:get(n,o,t)}if("value"in r)return r.value;var i=r.get;return void 0!==i?i.call(t):void 0},d=Object.assign||function(e){for(var o=1;o<arguments.length;o++){var t=arguments[o];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e};var v=function(e){function DiscoverLibraryPage(e){!function _classCallCheck(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this,DiscoverLibraryPage);var o=function _possibleConstructorReturn(e,o){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!o||"object"!=typeof o&&"function"!=typeof o?e:o}(this,(DiscoverLibraryPage.__proto__||Object.getPrototypeOf(DiscoverLibraryPage)).call(this,e));return o.config={},o.handleOnRefresh=o.handleOnRefresh.bind(o),o.goToLibrarySearch=o.goToLibrarySearch.bind(o),o.handleOnBookClick=o.handleOnBookClick.bind(o),o}return function _inherits(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function, not "+typeof o);e.prototype=Object.create(o&&o.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(e,o):e.__proto__=o)}(DiscoverLibraryPage,c["a"]),h(DiscoverLibraryPage,[{"key":"componentWillPreload","value":function componentWillPreload(){this.props.dispatchGetBorrowInfo()}},{"key":"handleOnRefresh","value":function handleOnRefresh(e){this.props.dispatchGetBorrowInfo().then(function(){e()}).catch(function(){e()})}},{"key":"goToLibrarySearch","value":function goToLibrarySearch(){y.a.navigateTo(y.a.Pages.DiscoverLibrarySearchPage)}},{"key":"goToLibrarySetting","value":function goToLibrarySetting(){y.a.navigateTo(y.a.Pages.DiscoverLibrarySettingPage)}},{"key":"handleOnBookClick","value":function handleOnBookClick(e){y.a.navigateTo(y.a.Pages.DiscoverLibraryBookDetailPage,{"id":e.macrNo})}},{"key":"render","value":function render(){var e=this,o=this.props,t=o.books,n=o.empty,i=o.showLoading,a=f.a.Images.mine_setting;return r.k.createElement(b.a,null,r.k.createElement(u.c,{"xbBarProps":{"title":"我的书架","leftIconVisible":!0},"xbScrollViewProps":{"empty":t.length<=0&&n,"showLoading":i,"onRefresh":this.handleOnRefresh}},r.k.createElement(u.B,{"onClick":this.goToLibrarySearch,"placeholder":"检索图书","disabled":!0}),r.k.createElement(u.J,{"title":"我的书架","verticalMargin":20}),t.map(function(o){return r.k.createElement(u.s,{"bookInfo":o,"key":o.codeId,"onClick":e.handleOnBookClick})})),r.k.createElement(u.n,{"onClick":this.goToLibrarySetting,"backgroundColor":"white","icon":a,"position":"right-bottom"}))}},{"key":"componentDidMount","value":function componentDidMount(){g(DiscoverLibraryPage.prototype.__proto__||Object.getPrototypeOf(DiscoverLibraryPage.prototype),"componentDidMount",this)&&g(DiscoverLibraryPage.prototype.__proto__||Object.getPrototypeOf(DiscoverLibraryPage.prototype),"componentDidMount",this).call(this)}},{"key":"componentDidShow","value":function componentDidShow(){g(DiscoverLibraryPage.prototype.__proto__||Object.getPrototypeOf(DiscoverLibraryPage.prototype),"componentDidShow",this)&&g(DiscoverLibraryPage.prototype.__proto__||Object.getPrototypeOf(DiscoverLibraryPage.prototype),"componentDidShow",this).call(this)}},{"key":"componentDidHide","value":function componentDidHide(){g(DiscoverLibraryPage.prototype.__proto__||Object.getPrototypeOf(DiscoverLibraryPage.prototype),"componentDidHide",this)&&g(DiscoverLibraryPage.prototype.__proto__||Object.getPrototypeOf(DiscoverLibraryPage.prototype),"componentDidHide",this).call(this)}}]),DiscoverLibraryPage}();v.defaultProps={},v=n.a([Object(i.b)(function mapStateToProps(e){return d({},e.DiscoverLibraryReducer.toJS())},function mapDispatchToProps(e){return d({},Object(a.b)(l,e))})],v);o.default=v}}]);