(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{"617":function(e,t,o){},"619":function(e,t,o){var n=o(620);"string"==typeof n&&(n=[[e.i,n,""]]);var a={"sourceMap":!1,"insertAt":"top","hmr":!0,"transform":void 0,"insertInto":void 0};o(44)(n,a);n.locals&&(e.exports=n.locals)},"620":function(e,t,o){(e.exports=o(43)(!1)).push([e.i,"iframe {\n  border: none;\n}\n\n.taro-webview {\n  position: fixed;\n  top: 0;\n  bottom: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 999;\n}",""])},"674":function(e,t,o){"use strict";o.r(t);var n=o(3),a=o(278),r=o(6),i=o(672),c=o(660),l=o(26),s=o(42),u=(o(619),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e}),p=function(){function defineProperties(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,o){return t&&defineProperties(e.prototype,t),o&&defineProperties(e,o),e}}();var d=function(e){function WebView(){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,WebView);var e=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(WebView.__proto__||Object.getPrototypeOf(WebView)).apply(this,arguments));return e.onLoad=e.onLoad.bind(e),e.onError=e.onError.bind(e),e}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(WebView,n["k"].Component),p(WebView,[{"key":"onLoad","value":function onLoad(e){var onLoad=this.props.onLoad;onLoad&&onLoad(e)}},{"key":"onError","value":function onError(e){var onError=this.props.onError;onError&&onError(e)}},{"key":"render","value":function render(){var e=this.props,t=e.src,o=function _objectWithoutProperties(e,t){var o={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(o[n]=e[n]);return o}(e,["src"]);return n.k.createElement("iframe",u({"className":"taro-webview","onLoad":this.onLoad,"onError":this.onError},Object(s.a)(this.props,["src","className"]),{"src":t},o))}}]),WebView}(),f=o(39),h=o(16),b=o(29),m=o(2),y=o(8),w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},_={"dispatchGetNewsDetail":function dispatchGetNewsDetail(e){return function(t){return new Promise(function(o,n){t({"type":m.a.GLOBAL.GET_STU_NOTICE_DETAIL_BEGIN}),y.a.getNewsDetail(e).then(function(e){t({"type":m.a.GLOBAL.GET_STU_NOTICE_DETAIL_SUCCESS,"data":e.newsData}),o(e)}).catch(function(e){console.log(e),t({"type":m.a.GLOBAL.GET_STU_NOTICE_DETAIL_FAIL}),n(e)})})}},"dispatchUpdateNews":function dispatchUpdateNews(e){return function(t){t({"type":m.a.GLOBAL.UPDATE_STU_NOTICE_DETAIL,"data":e})}},"dispatchCollectNews":function dispatchCollectNews(e){return function(t){return new Promise(function(o,n){t({"type":m.a.GLOBAL.COLLECT_NEWS_BEGIN}),y.a.collectNew(e.id,e.url,e.img,e.title).then(function(e){t({"type":m.a.GLOBAL.COLLECT_NEWS_SUCCESS,"data":w({},e)}),o(e)}).catch(function(e){console.log(e),t({"type":m.a.GLOBAL.COLLECT_NEWS_FAIL}),n(e)})})}}},O=o(279),E=(o(617),o(40)),g=o(277),v=function(){function defineProperties(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,o){return t&&defineProperties(e.prototype,t),o&&defineProperties(e,o),e}}(),N=function get(e,t,o){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var a=Object.getPrototypeOf(e);return null===a?void 0:get(a,t,o)}if("value"in n)return n.value;var r=n.get;return void 0!==r?r.call(o):void 0},k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e};var P=function(e){function StuNoticeDetailPage(e){!function discover_stu_notice_detail_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,StuNoticeDetailPage);var t=function discover_stu_notice_detail_possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(StuNoticeDetailPage.__proto__||Object.getPrototypeOf(StuNoticeDetailPage)).call(this,e));return t.config={},t.state={"loadFinish":!1},t.handleCollectNews=t.handleCollectNews.bind(t),t.handleOnRefresh=t.handleOnRefresh.bind(t),t.handleEnclosureClick=t.handleEnclosureClick.bind(t),t.onHtmlLoad=t.onHtmlLoad.bind(t),t}return function discover_stu_notice_detail_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(StuNoticeDetailPage,b["a"]),v(StuNoticeDetailPage,[{"key":"componentWillPreload","value":function componentWillPreload(e){var t=e.id;t&&this.props.dispatchGetNewsDetail(t)}},{"key":"handleOnRefresh","value":function handleOnRefresh(e,t){e&&e.id?this.props.dispatchGetNewsDetail(e.id).then(function(){t()}).catch(function(){t()}):t()}},{"key":"handleEnclosureClick","value":function handleEnclosureClick(e){if(!y.a.isSupportDownload(e.text))return b.a.normalMessage("不支持打开该类型的文件，下载链接已复制到剪切板，请用浏览器打开下载"),void r.a.setClipboardData({"data":e.url});Object(i.b)({"title":"正在下载","mask":!0}),y.a.downloadEnclosure(e.url,e.text).then(function(){Object(i.a)()}).catch(function(t){Object(i.a)(),console.log(t),b.a.normalMessage("不支持打开该类型的文件，下载链接已复制到剪切板，请用浏览器打开下载"),r.a.setClipboardData({"data":e.url})})}},{"key":"handleCollectNews","value":function handleCollectNews(e){e&&e.id&&this.props.dispatchCollectNews(e).then(function(){b.a.successMessage("收藏成功")}).catch(function(){b.a.errorMessage("收藏失败")})}},{"key":"onHtmlLoad","value":function onHtmlLoad(){this.setState({"loadFinish":!0})}},{"key":"render","value":function render(){var e=this,t=this.props,o=t.showLoading,a=t.news,r=this.state.loadFinish,i="";b.a.isWeapp()&&(i=Object(E.d)(a.updatedAt?a.updatedAt:"1996-11-12","YYYY-M-D h:mm:ss"));var s=g.a.Images.more_icon_collection;return n.k.createElement(c.a,null,b.a.isWeapp()&&n.k.createElement(c.a,null,n.k.createElement(O.c,{"xbBarProps":{"title":"周知详情","leftIconVisible":!0},"xbScrollViewProps":{"enableRefresh":!0,"onRefresh":this.handleOnRefresh.bind(this,a),"showBackTop":!0,"enableLoadMore":!1,"showLoading":o,"backTopBtnVerticalMargin":140}},n.k.createElement(l.a,{"className":"xb-news-detail-body"},n.k.createElement(l.a,{"className":"xb-news-detail-title"},n.k.createElement(l.a,{"className":"xb-news-detail-title-bar"}),n.k.createElement(l.a,{"className":"xb-news-detail-title-content"},a.title)),n.k.createElement(l.a,{"className":"xb-news-detail-extra-info"},n.k.createElement(l.a,{"className":"xb-news-detail-date"},i),n.k.createElement(l.a,{"className":"xb-news-detail-author"},a.author)),n.k.createElement(l.a,{"className":"xb-news-detail-content"},n.k.createElement(O.y,{"richText":a.content,"type":"html"})),!!a.files&&a.files.length>0&&n.k.createElement(l.a,{"className":"xb-news-detail-enclosure"},n.k.createElement(l.a,{"className":"xb-news-detail-enclosure-title"},n.k.createElement(l.a,{"className":"xb-news-detail-enclosure-title-bar"}),n.k.createElement(l.a,{"className":"xb-news-detail-enclosure-title-content"},"附件：")),a.files.map(function(t){return n.k.createElement(l.a,{"key":t.url,"className":".xb-news-detail-enclosure-item"},n.k.createElement(l.a,{"id":t.url,"onClick":e.handleEnclosureClick.bind(e,t)},t.text))}))))),b.a.isH5()&&n.k.createElement(c.a,null,n.k.createElement(O.b,{"title":"","leftIconVisible":!0,"barBg":"transparent"}),n.k.createElement(l.a,{"style":"position: relative; z-index: 0;"},n.k.createElement(d,{"src":a&&a.url?a.url:"","onLoad":this.onHtmlLoad})),!r&&n.k.createElement(O.t,{"text":"正在搬运"})),n.k.createElement(O.n,{"onClick":this.handleCollectNews.bind(this,a),"icon":s,"backgroundColor":"#fff"}))}},{"key":"componentDidMount","value":function componentDidMount(){N(StuNoticeDetailPage.prototype.__proto__||Object.getPrototypeOf(StuNoticeDetailPage.prototype),"componentDidMount",this)&&N(StuNoticeDetailPage.prototype.__proto__||Object.getPrototypeOf(StuNoticeDetailPage.prototype),"componentDidMount",this).call(this)}},{"key":"componentDidShow","value":function componentDidShow(){N(StuNoticeDetailPage.prototype.__proto__||Object.getPrototypeOf(StuNoticeDetailPage.prototype),"componentDidShow",this)&&N(StuNoticeDetailPage.prototype.__proto__||Object.getPrototypeOf(StuNoticeDetailPage.prototype),"componentDidShow",this).call(this)}},{"key":"componentDidHide","value":function componentDidHide(){N(StuNoticeDetailPage.prototype.__proto__||Object.getPrototypeOf(StuNoticeDetailPage.prototype),"componentDidHide",this)&&N(StuNoticeDetailPage.prototype.__proto__||Object.getPrototypeOf(StuNoticeDetailPage.prototype),"componentDidHide",this).call(this)}}]),StuNoticeDetailPage}();P.defaultProps={},P=a.a([Object(f.b)(function mapStateToProps(e){return k({},e.StuNoticeDetailReducer.toJS())},function mapDispatchToProps(e){return k({},Object(h.b)(_,e))})],P);t.default=P}}]);