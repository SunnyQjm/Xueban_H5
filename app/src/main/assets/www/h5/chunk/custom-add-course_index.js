(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"514":function(e,t,o){},"620":function(e,t,o){"use strict";o.r(t);var n=o(3),a=o(230),s=o(6),i=o(596),r=o(17),c=o(594),l=o(638),u=o(613),d=o(639),m=o(605),C=o(606),h=o(27),p=o(13),g=o(20),y=o(231),f=(o(514),o(28)),k=o(229),b=o(15),T=o(9),v={"dispatchAddCourse":function dispatchAddCourse(e){return function(t){return T.a.addCustomCourseInfo(e,t)}}},E=o(29),_=function(){function defineProperties(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,o){return t&&defineProperties(e.prototype,t),o&&defineProperties(e,o),e}}(),w=function get(e,t,o){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var a=Object.getPrototypeOf(e);return null===a?void 0:get(a,t,o)}if("value"in n)return n.value;var s=n.get;return void 0!==s?s.call(o):void 0},A=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e};var O=function(e){function CustomAddCoursePage(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,CustomAddCoursePage);var t=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(CustomAddCoursePage.__proto__||Object.getPrototypeOf(CustomAddCoursePage)).call(this,e));return t.customCourse={"name":"","location":"","teacher":"","credit":.5},t.state={"creditValue":.5,"floatLayoutOpen":!1,"weekBegin":1,"weekEnd":8,"weekday":1,"classTimeBegin":1,"classTimeEnd":2,"courseTimes":[]},t.onAddCourse=t.onAddCourse.bind(t),t.onAddCourseTimeClick=t.onAddCourseTimeClick.bind(t),t.onClassTimeChange=t.onClassTimeChange.bind(t),t.onCourseTimeItemAddClick=t.onCourseTimeItemAddClick.bind(t),t.onCourseTimeItemDeleteClick=t.onCourseTimeItemDeleteClick.bind(t),t.onCreditValueChange=t.onCreditValueChange.bind(t),t.onFloatLayoutClose=t.onFloatLayoutClose.bind(t),t.onInputChange=t.onInputChange.bind(t),t.onWeekChange=t.onWeekChange.bind(t),t.onWeekDayChange=t.onWeekDayChange.bind(t),t}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(CustomAddCoursePage,g["a"]),_(CustomAddCoursePage,[{"key":"onInputChange","value":function onInputChange(e,t){this.customCourse[e]=t}},{"key":"onCreditValueChange","value":function onCreditValueChange(e){this.setState({"creditValue":e.detail.value}),this.customCourse.credit=e.detail.value}},{"key":"onWeekDayChange","value":function onWeekDayChange(e){this.setState({"weekday":e.detail.value})}},{"key":"onWeekChange","value":function onWeekChange(e){this.setState({"weekBegin":(e[0]>e[1]?e[1]:e[0])+1,"weekEnd":(e[0]>e[1]?e[0]:e[1])+1})}},{"key":"onClassTimeChange","value":function onClassTimeChange(e){this.setState({"classTimeBegin":(e[0]>e[1]?e[1]:e[0])+1,"classTimeEnd":(e[0]>e[1]?e[0]:e[1])+1})}},{"key":"onAddCourseTimeClick","value":function onAddCourseTimeClick(){this.setState({"floatLayoutOpen":!0})}},{"key":"onFloatLayoutClose","value":function onFloatLayoutClose(){this.setState({"floatLayoutOpen":!1})}},{"key":"onCourseTimeItemDeleteClick","value":function onCourseTimeItemDeleteClick(e){this.setState({"courseTimes":this.state.courseTimes.filter(function(t,o){return o!==e})})}},{"key":"onCourseTimeItemAddClick","value":function onCourseTimeItemAddClick(){this.setState({"courseTimes":this.state.courseTimes.concat({"weekBegin":this.state.weekBegin,"weekEnd":this.state.weekEnd,"weekday":this.state.weekday,"classTimeBegin":this.state.classTimeBegin,"classTimeEnd":this.state.classTimeEnd}),"floatLayoutOpen":!1})}},{"key":"onAddCourse","value":function onAddCourse(){var e=this;if(this.customCourse.name&&this.customCourse.location){var t={"CourseId":Object(f.i)(1e3,1e5).toString(),"Name":this.customCourse.name,"CourseNumber":"","Credit":this.customCourse.credit.toString(),"Type":"","Teacher":this.customCourse.teacher,"bgColor":"","Lesson":[]};this.state.courseTimes.forEach(function(o){for(var n=[],a=o.weekBegin;a<=o.weekEnd;a++)n.push(a);t.Lesson.push({"Week":n,"WeekDay":o.weekday.toString(),"Section":o.classTimeBegin.toString(),"Duration":(o.classTimeEnd-o.classTimeBegin+1).toString(),"Location":e.customCourse.location,"WeekStr":""})}),this.props.dispatchAddCourse(t).then(function(){b.a.navigateBack().then(function(){g.a.successMessage("手动添加课程: "+t.Name+" 成功！")})}).catch(function(){g.a.errorMessage("手动添加课程失败T_T")})}else g.a.normalMessage("请将信息填写完整")}},{"key":"render","value":function render(){var e=this,t=this.state.courseTimes,o=k.a.Images,a=o.icon_class_settings_name,h=o.icon_classdetail_location,p=o.icon_classdetail_teacher,g=o.icon_save,b=E.a.themeColor;return n.e.createElement(i.a,null,n.e.createElement(y.b,{"title":"添加课程","leftIconVisible":!0}),n.e.createElement(y.j,null,n.e.createElement(r.a,{"className":"span"}),n.e.createElement(y.q,{"onInputChange":this.onInputChange,"keyName":"name","title":"课程","placeholder":"添加课程名","icon":a}),n.e.createElement(y.q,{"onInputChange":this.onInputChange,"keyName":"location","title":"地点","placeholder":"添加上课地点","icon":h}),n.e.createElement(y.q,{"onInputChange":this.onInputChange,"keyName":"teacher","title":"老师","placeholder":"(选填)","icon":p}),n.e.createElement(r.a,{"className":"custom-add-course-credit"},n.e.createElement(y.G,{"title":"学分","verticalMargin":30},n.e.createElement(c.a,null,this.state.creditValue+" 学分")),n.e.createElement(l.a,{"min":.5,"max":10,"step":.5,"activeColor":b,"onChange":this.onCreditValueChange,"onChanging":this.onCreditValueChange})),n.e.createElement(y.G,{"title":"课程时间","verticalMargin":30},n.e.createElement(u.a,{"type":"secondary","size":"small","onClick":this.onAddCourseTimeClick},"添加课程时间")),t.map(function(t,o){return n.e.createElement(d.a,{"options":[{"text":"删除","style":{"backgroundColor":"#FF4949"}}],"autoClose":!0,"onClick":e.onCourseTimeItemDeleteClick.bind(e,o),"key":o},n.e.createElement(c.a,{"className":"course-time-item","onLongPress":e.onCourseTimeItemDeleteClick.bind(e,o)},"第 "+t.weekBegin+" 周-第 "+t.weekEnd+" 周 · "+Object(f.g)(t.weekday)+" · ","第 "+t.classTimeBegin+" 节-第 "+t.classTimeEnd+" 节"))}),n.e.createElement(m.a,{"isOpened":this.state.floatLayoutOpen,"scrollY":!0,"onClose":this.onFloatLayoutClose},n.e.createElement(r.a,{"className":"custom-add-course-time-title"},n.e.createElement(c.a,null,"添加课程时间"),n.e.createElement(r.a,{"className":"span"}),n.e.createElement(u.a,{"type":"secondary","size":"small","onClick":this.onFloatLayoutClose},"取消"),n.e.createElement(u.a,{"type":"primary","size":"small","customStyle":"margin-left: "+s.a.pxTransform(20),"onClick":this.onCourseTimeItemAddClick},"确定")),n.e.createElement(y.G,{"title":"上课周数","verticalMargin":30},n.e.createElement(c.a,null,"第",this.state.weekBegin,"周-第",this.state.weekEnd,"周")),n.e.createElement(C.a,{"trackStyle":"background-color: "+b,"value":[this.state.weekBegin-1,this.state.weekEnd-1],"max":30,"onChange":this.onWeekChange}),n.e.createElement(y.G,{"title":"周几上课","verticalMargin":30},n.e.createElement(c.a,null,Object(f.g)(this.state.weekday))),n.e.createElement(l.a,{"min":1,"max":7,"step":1,"activeColor":b,"onChange":this.onWeekDayChange,"onChanging":this.onWeekDayChange}),n.e.createElement(y.G,{"title":"上课时间","verticalMargin":30},n.e.createElement(c.a,null,"第",this.state.classTimeBegin,"节-第",this.state.classTimeEnd,"节")),n.e.createElement(C.a,{"trackStyle":"background-color: "+b,"value":[this.state.classTimeBegin-1,this.state.classTimeEnd-1],"max":11,"onChange":this.onClassTimeChange})),n.e.createElement(y.n,{"onClick":this.onAddCourse,"iconSize":50,"btnSize":90,"icon":g,"backgroundColor":"#fff"})))}},{"key":"componentDidMount","value":function componentDidMount(){w(CustomAddCoursePage.prototype.__proto__||Object.getPrototypeOf(CustomAddCoursePage.prototype),"componentDidMount",this)&&w(CustomAddCoursePage.prototype.__proto__||Object.getPrototypeOf(CustomAddCoursePage.prototype),"componentDidMount",this).call(this)}},{"key":"componentDidShow","value":function componentDidShow(){w(CustomAddCoursePage.prototype.__proto__||Object.getPrototypeOf(CustomAddCoursePage.prototype),"componentDidShow",this)&&w(CustomAddCoursePage.prototype.__proto__||Object.getPrototypeOf(CustomAddCoursePage.prototype),"componentDidShow",this).call(this)}},{"key":"componentDidHide","value":function componentDidHide(){w(CustomAddCoursePage.prototype.__proto__||Object.getPrototypeOf(CustomAddCoursePage.prototype),"componentDidHide",this)&&w(CustomAddCoursePage.prototype.__proto__||Object.getPrototypeOf(CustomAddCoursePage.prototype),"componentDidHide",this).call(this)}}]),CustomAddCoursePage}();O=a.a([Object(h.b)(function mapStateToProps(e){return A({},e.CustomAddCourseReducer.toJS())},function mapDispatchToProps(e){return A({},Object(p.b)(v,e))})],O);t.default=O}}]);