(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{"280":function(e,n,t){"use strict";var o=t(2),a=t(19),i=t(8);n.a={"dispatchPreviewQrCode":function dispatchPreviewQrCode(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return function(i){i({"type":o.a.ROUTER_PARAM.ROUTER_PARAM_PREVIEW_QR_CODE,"data":{"content":e,"tip":n,"description":t}}),a.a.navigateTo(a.a.Pages.QrCodePreviewPage)}},"dispatchGotoCourseDetail":function dispatchGotoCourseDetail(e,n){return function(t){var i={"mode":e};0===e?i.courses=n:2===e&&(i.networkCourses=n),t({"type":o.a.ROUTER_PARAM.ROUTER_PARAM_COURSE_DETAIL,"data":i}),a.a.navigateTo(a.a.Pages.CourseDetailPage)}},"dispatchGoToPostDetail":function dispatchGoToPostDetail(e){return function(n){n({"type":o.a.ROUTER_PARAM.ROUTER_PARAM_POST_DETAIL,"data":e}),a.a.navigateTo(a.a.Pages.SleepTalkDetailPage,{"id":e.id})}},"dispatchGotoNoticeDetail":function dispatchGotoNoticeDetail(e){return function(n){n({"type":o.a.ROUTER_PARAM.ROUTER_PARAM_NOTICE_DETAIL,"data":e}),a.a.navigateTo(a.a.Pages.StuNoticeDetailPage,{"id":e.id})}},"dispatchGoToPersonDetail":function dispatchGoToPersonDetail(e){return function(n){n({"type":o.a.ROUTER_PARAM.ROUTER_PARAM_PERSON_DETAIL,"data":e}),a.a.navigateTo(a.a.Pages.PersonInfoPage,{"userId":e.id,"isOther":!i.a.userInfo||i.a.userInfo.id!==e.id})}},"dispatchPreviewImage":function dispatchPreviewImage(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(t){t({"type":o.a.ROUTER_PARAM.ROUTER_PARAM_PREVIEW_IMAGES,"data":{"urls":e,"index":n}}),a.a.navigateTo(a.a.Pages.ImagePreviewerPage)}}}},"556":function(e,n,t){},"671":function(e,n,t){"use strict";t.r(n);var o=t(3),a=t(278),i=t(273),r=t(672),s=t(1),c=Object(s.g)("scanQRCode",{"needResult":1},function(e){return{"errMsg":"scanQRCode:ok"===e.errMsg?"scanCode:ok":e.errMsg,"result":e.resultStr}}),l=t(26),u=t(39),d=t(16),f=t(29),p=(t(556),t(279)),h=t(277),C=t(8),g=t(280),P=(Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e})({},g.a,{"dispatchGetClassInfo":function dispatchGetClassInfo(e,n){return function(t){return C.a.getClassInfo(e,n,t)}}}),I=t(19),k=function(){function defineProperties(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,t){return n&&defineProperties(e.prototype,n),t&&defineProperties(e,t),e}}();var b=function(){function JsCallAndroid(){!function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,JsCallAndroid)}return k(JsCallAndroid,null,[{"key":"getCaller","value":function getCaller(){return window&&window[JsCallAndroid.JS_CALLER_NAME]||null}},{"key":"toast","value":function toast(e){var n=this.getCaller();n&&n.toast(e)}},{"key":"scanCode","value":function scanCode(e){var n=this.getCaller();n&&(window[JsCallAndroid.CALLBACK_SCAN_CODE]=function(n){console.log(n),e&&e(n)},n&&n.scanCode())}}]),JsCallAndroid}();b.JS_CALLER_NAME="JsCallAndroidEr",b.CALLBACK_NAME_BASE="_Xueban_Android_JS_CALLBACK_",b.CALLBACK_SCAN_CODE=b.CALLBACK_NAME_BASE+"scan_code";var m,v=function(){function defineProperties(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,t){return n&&defineProperties(e.prototype,n),t&&defineProperties(e,t),e}}(),R=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e};var A=m=function(e){function IndexPage(e){!function index_classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,IndexPage);var n=function _possibleConstructorReturn(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}(this,(IndexPage.__proto__||Object.getPrototypeOf(IndexPage)).call(this,e));return n.config={"usingComponents":{}},n.state={"tabIndex":0,"title":"第五周","leftIconVisible":!0,"showDropDownImage":!0,"leftIcon":h.a.Images.icon_table_scan},n.handleOnCourseItemClick=n.handleOnCourseItemClick.bind(n),n.handleOnLeftIconClick=n.handleOnLeftIconClick.bind(n),n.handleOnTitleClick=n.handleOnTitleClick.bind(n),n.xbFloatBtnRefCat=n.xbFloatBtnRefCat.bind(n),n.onMenuItemClick=n.onMenuItemClick.bind(n),n.dealScanResult=n.dealScanResult.bind(n),n}return function _inherits(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(IndexPage,f["a"]),v(IndexPage,[{"key":"componentWillPreload","value":function componentWillPreload(){this.props.dispatchGetClassInfo(!1,!1)}},{"key":"componentDidMount","value":function componentDidMount(){C.a.socketIOHelper&&C.a.socketIOHelper.registerUpdateTabBarBargeCallback(function(e){e.forEach(function(e){e.num>0?Object(i.c)({"index":e.index,"text":e.num.toString()}).catch(function(e){console.log(e)}):Object(i.b)({"index":e.index}).catch(function(e){console.log(e)})})}).init(function(){})}},{"key":"componentWillUnmount","value":function componentWillUnmount(){}},{"key":"componentDidShow","value":function componentDidShow(){}},{"key":"componentDidHide","value":function componentDidHide(){}},{"key":"dealScanResult","value":function dealScanResult(e){var n=this,t=e.result.split("/")[2].split("&"),o=t[0],a=t[1];C.a.getCourseInfoByIdAndNumber(o,a).then(function(e){var t=e.course;Object(r.c)({"title":"添加课程","content":"确定添加 "+t.Name+"("+t.CourseNumber+")","success":function success(e){e.confirm&&C.a.addCustomCourseInfo(t,n.props.dispatch).then(function(){f.a.successMessage("扫码添加课程: "+t.Name+" 成功！")}).catch(function(e){f.a.errorMessage(e)})}})}).catch(function(e){f.a.errorMessage(e),console.log(e)})}},{"key":"handleOnLeftIconClick","value":function handleOnLeftIconClick(){var e=this;f.a.isWeapp()?c().then(function(n){e.dealScanResult(n)}).catch(function(e){f.a.errorMessage(e.message)}):f.a.isH5()&&b.scanCode(function(n){m.successMessage(n),e.dealScanResult({"result":n})})}},{"key":"onMenuItemClick","value":function onMenuItemClick(e){switch(e){case 0:this.props.dispatchGetClassInfo(!0,!1).then(function(){f.a.successMessage("成功同步教务课程表")}).catch(function(e){console.error(e)});break;case 1:I.a.navigateTo(I.a.Pages.CustomAddCoursePage);break;case 2:I.a.navigateTo(I.a.Pages.CourseDetailPage,{"mode":1})}}},{"key":"xbFloatBtnRefCat","value":function xbFloatBtnRefCat(e){this.xbFloatBtnMenu=e}},{"key":"handleOnCourseItemClick","value":function handleOnCourseItemClick(e){e.length<=0||e[0].empty||this.props.dispatchGotoCourseDetail(0,e)}},{"key":"handleOnTitleClick","value":function handleOnTitleClick(){I.a.navigateTo(I.a.Pages.ChangeWeekPage)}},{"key":"render","value":function render(){var e=h.a.Images.logo_header,n=40;return f.a.isH5()&&(n=140),o.k.createElement(l.a,{"className":"index"},o.k.createElement(p.b,{"title":"第 "+this.props.selectedWeek+" 周","showTitleDropDownIcon":this.state.showDropDownImage,"leftIcon":this.state.leftIcon,"leftIconVisible":this.state.leftIconVisible,"onLeftIconClick":this.handleOnLeftIconClick,"onTitleClick":this.handleOnTitleClick}),o.k.createElement(p.j,{"showLoading":this.props.showLoading},o.k.createElement(p.f,{"courseInfos":this.props.courseInfo,"week":this.props.week,"selectedWeek":this.props.selectedWeek,"test":this.props.courseInfo.length,"onCourseItemClick":this.handleOnCourseItemClick}),o.k.createElement(p.o,{"iconSize":50,"btnSize":90,"icon":e,"menuList":m.menuList,"onMenuItemClick":this.onMenuItemClick,"verticalMargin":n,"ref":this.xbFloatBtnRefCat})))}}]),IndexPage}();A.defaultProps={"selectedWeek":1,"week":1,"dispatchGetClassInfo":function dispatchGetClassInfo(){},"courseInfo":[],"showLoading":!1,"dispatch":null},A.menuList=["自动添加","手动添加","全部课程"],A=m=a.a([Object(u.b)(function mapStateToProps(e){return R({},e.IndexReducer.toJS())},function mapDispatchToProps(e){return R({},Object(d.b)(P,e))})],A);n.default=A}}]);