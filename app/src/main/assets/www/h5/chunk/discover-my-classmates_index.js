(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{"280":function(e,t,n){"use strict";var a=n(2),o=n(19),i=n(8);t.a={"dispatchPreviewQrCode":function dispatchPreviewQrCode(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return function(i){i({"type":a.a.ROUTER_PARAM.ROUTER_PARAM_PREVIEW_QR_CODE,"data":{"content":e,"tip":t,"description":n}}),o.a.navigateTo(o.a.Pages.QrCodePreviewPage)}},"dispatchGotoCourseDetail":function dispatchGotoCourseDetail(e,t){return function(n){var i={"mode":e};0===e?i.courses=t:2===e&&(i.networkCourses=t),n({"type":a.a.ROUTER_PARAM.ROUTER_PARAM_COURSE_DETAIL,"data":i}),o.a.navigateTo(o.a.Pages.CourseDetailPage)}},"dispatchGoToPostDetail":function dispatchGoToPostDetail(e){return function(t){t({"type":a.a.ROUTER_PARAM.ROUTER_PARAM_POST_DETAIL,"data":e}),o.a.navigateTo(o.a.Pages.SleepTalkDetailPage,{"id":e.id})}},"dispatchGotoNoticeDetail":function dispatchGotoNoticeDetail(e){return function(t){t({"type":a.a.ROUTER_PARAM.ROUTER_PARAM_NOTICE_DETAIL,"data":e}),o.a.navigateTo(o.a.Pages.StuNoticeDetailPage,{"id":e.id})}},"dispatchGoToPersonDetail":function dispatchGoToPersonDetail(e){return function(t){t({"type":a.a.ROUTER_PARAM.ROUTER_PARAM_PERSON_DETAIL,"data":e}),o.a.navigateTo(o.a.Pages.PersonInfoPage,{"userId":e.id,"isOther":!i.a.userInfo||i.a.userInfo.id!==e.id})}},"dispatchPreviewImage":function dispatchPreviewImage(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(n){n({"type":a.a.ROUTER_PARAM.ROUTER_PARAM_PREVIEW_IMAGES,"data":{"urls":e,"index":t}}),o.a.navigateTo(o.a.Pages.ImagePreviewerPage)}}}},"609":function(e,t,n){},"686":function(e,t,n){"use strict";n.r(t);var a=n(3),o=n(278),i=n(660),r=n(39),s=n(16),l=n(29),c=n(8),d=n(2),p=n(280),h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},u=h({},p.a,{"dispatchGetRandomStudents":function dispatchGetRandomStudents(){return function(e){return new Promise(function(t,n){e({"type":d.a.GLOBAL.GET_RANDOM_STUDENTS_BEGIN}),c.a.randomGetStudent().then(function(n){e({"type":d.a.GLOBAL.GET_RANDOM_STUDENTS_SUCCESS,"data":n}),t(n)}).catch(function(t){console.log(t),e({"type":d.a.GLOBAL.GET_RANDOM_STUDENTS_FAIL}),n(t)})})}},"dispatchChange":function dispatchChange(e){return function(t){t({"type":d.a.GLOBAL.CHANGE_STUDENT_OPT,"data":e})}},"dispatchStarStudent":function dispatchStarStudent(e,t){return function(n){return new Promise(function(a,o){n({"type":d.a.GLOBAL.STAR_STUDENT_BEGIN}),c.a.star(e.id,e.isStared?"del":"add").then(function(o){n({"type":d.a.GLOBAL.STAR_STUDENT_SUCCESS,"data":h({"personInfo":e,"selectIndex":t},o)}),a(o)}).catch(function(e){console.log(e),n({"type":d.a.GLOBAL.STAR_STUDENT_FAIL}),o(e)})})}}}),f=n(279),P=(n(609),function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}()),O=function get(e,t,n){null===e&&(e=Function.prototype);var a=Object.getOwnPropertyDescriptor(e,t);if(void 0===a){var o=Object.getPrototypeOf(e);return null===o?void 0:get(o,t,n)}if("value"in a)return a.value;var i=a.get;return void 0!==i?i.call(n):void 0},y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};var g=function(e){function MyClassmatesPage(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,MyClassmatesPage);var t=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(MyClassmatesPage.__proto__||Object.getPrototypeOf(MyClassmatesPage)).call(this,e));return t.config={},t.state={"perDistance":500},t.handleOnAnonymousPrivateLetter=t.handleOnAnonymousPrivateLetter.bind(t),t.handleOnPrivateLetter=t.handleOnPrivateLetter.bind(t),t.handleOnStar=t.handleOnStar.bind(t),t.handleAvatarClick=t.handleAvatarClick.bind(t),t.handleOnCardClick=t.handleOnCardClick.bind(t),t.handleOnPerDistanceChange=t.handleOnPerDistanceChange.bind(t),t.handleOnIndexChange=t.handleOnIndexChange.bind(t),t.handleOnSlideLeft=t.handleOnSlideLeft.bind(t),t.handleOnSlideRight=t.handleOnSlideRight.bind(t),t}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(MyClassmatesPage,l["a"]),P(MyClassmatesPage,[{"key":"componentWillPreload","value":function componentWillPreload(){this.props.dispatchGetRandomStudents()}},{"key":"handleOnCardClick","value":function handleOnCardClick(e){e&&this.props.dispatchGoToPersonDetail(e)}},{"key":"handleAvatarClick","value":function handleAvatarClick(e){e.headImage&&this.previewImage("",[e.headImage],0)}},{"key":"handleOnStar","value":function handleOnStar(e){var t=this.props.selectIndex;e&&this.props.dispatchStarStudent(e,t)}},{"key":"handleOnPrivateLetter","value":function handleOnPrivateLetter(){this.notSupport()}},{"key":"handleOnAnonymousPrivateLetter","value":function handleOnAnonymousPrivateLetter(){this.notSupport()}},{"key":"handleOnPerDistanceChange","value":function handleOnPerDistanceChange(e){this.setState({"perDistance":e})}},{"key":"handleOnIndexChange","value":function handleOnIndexChange(e){this.props.dispatchChange(e)}},{"key":"handleOnSlideLeft","value":function handleOnSlideLeft(){this.props.dispatchChange(this.props.selectIndex+1)}},{"key":"handleOnSlideRight","value":function handleOnSlideRight(){this.props.dispatchChange(this.props.selectIndex-1)}},{"key":"render","value":function render(){var e=this,t=this.state.perDistance,n=this.props.selectIndex;return a.k.createElement(i.a,null,a.k.createElement(f.b,{"title":"我的同学","leftIconVisible":!0}),a.k.createElement(f.j,{"fullScreen":!0,"showLoading":this.props.myClassmates.length<=0},a.k.createElement(f.G,{"zIndex":2,"index":n,"itemNum":this.props.myClassmates&&this.props.myClassmates.length?this.props.myClassmates.length:0,"showIndicator":!0,"onPerDistanceChange":this.handleOnPerDistanceChange,"onChange":this.handleOnIndexChange},this.props.myClassmates.map(function(n,o){return a.k.createElement(f.F,{"key":n.id,"left":t*o},a.k.createElement(f.g,{"personInfo":n,"onAvatarClick":e.handleAvatarClick,"onCardClick":e.handleOnCardClick,"onAnonymousPrivateLetter":e.handleOnAnonymousPrivateLetter,"onPrivateLetter":e.handleOnPrivateLetter,"onStar":e.handleOnStar}))}))),a.k.createElement(f.p,{"customStyle":"z-index: 3;","showLeft":n>0,"showRight":n<this.props.myClassmates.length-1,"onSlideLeft":this.handleOnSlideLeft,"onSlideRight":this.handleOnSlideRight}))}},{"key":"componentDidMount","value":function componentDidMount(){O(MyClassmatesPage.prototype.__proto__||Object.getPrototypeOf(MyClassmatesPage.prototype),"componentDidMount",this)&&O(MyClassmatesPage.prototype.__proto__||Object.getPrototypeOf(MyClassmatesPage.prototype),"componentDidMount",this).call(this)}},{"key":"componentDidShow","value":function componentDidShow(){O(MyClassmatesPage.prototype.__proto__||Object.getPrototypeOf(MyClassmatesPage.prototype),"componentDidShow",this)&&O(MyClassmatesPage.prototype.__proto__||Object.getPrototypeOf(MyClassmatesPage.prototype),"componentDidShow",this).call(this)}},{"key":"componentDidHide","value":function componentDidHide(){O(MyClassmatesPage.prototype.__proto__||Object.getPrototypeOf(MyClassmatesPage.prototype),"componentDidHide",this)&&O(MyClassmatesPage.prototype.__proto__||Object.getPrototypeOf(MyClassmatesPage.prototype),"componentDidHide",this).call(this)}}]),MyClassmatesPage}();g.defaultProps={},g=o.a([Object(r.b)(function mapStateToProps(e){return y({},e.MyClassmatesReducer.toJS())},function mapDispatchToProps(e){return y({},Object(s.b)(u,e))})],g);t.default=g}}]);