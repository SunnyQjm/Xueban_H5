(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{"280":function(e,t,o){"use strict";var n=o(2),a=o(19),i=o(8);t.a={"dispatchPreviewQrCode":function dispatchPreviewQrCode(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return function(i){i({"type":n.a.ROUTER_PARAM.ROUTER_PARAM_PREVIEW_QR_CODE,"data":{"content":e,"tip":t,"description":o}}),a.a.navigateTo(a.a.Pages.QrCodePreviewPage)}},"dispatchGotoCourseDetail":function dispatchGotoCourseDetail(e,t){return function(o){var i={"mode":e};0===e?i.courses=t:2===e&&(i.networkCourses=t),o({"type":n.a.ROUTER_PARAM.ROUTER_PARAM_COURSE_DETAIL,"data":i}),a.a.navigateTo(a.a.Pages.CourseDetailPage)}},"dispatchGoToPostDetail":function dispatchGoToPostDetail(e){return function(t){t({"type":n.a.ROUTER_PARAM.ROUTER_PARAM_POST_DETAIL,"data":e}),a.a.navigateTo(a.a.Pages.SleepTalkDetailPage,{"id":e.id})}},"dispatchGotoNoticeDetail":function dispatchGotoNoticeDetail(e){return function(t){t({"type":n.a.ROUTER_PARAM.ROUTER_PARAM_NOTICE_DETAIL,"data":e}),a.a.navigateTo(a.a.Pages.StuNoticeDetailPage,{"id":e.id})}},"dispatchGoToPersonDetail":function dispatchGoToPersonDetail(e){return function(t){t({"type":n.a.ROUTER_PARAM.ROUTER_PARAM_PERSON_DETAIL,"data":e}),a.a.navigateTo(a.a.Pages.PersonInfoPage,{"userId":e.id,"isOther":!i.a.userInfo||i.a.userInfo.id!==e.id})}},"dispatchPreviewImage":function dispatchPreviewImage(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(o){o({"type":n.a.ROUTER_PARAM.ROUTER_PARAM_PREVIEW_IMAGES,"data":{"urls":e,"index":t}}),a.a.navigateTo(a.a.Pages.ImagePreviewerPage)}}}},"560":function(e,t,o){},"562":function(e,t){e.exports="data:image/png;base64,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"},"679":function(e,t,o){"use strict";o.r(t);var n=o(3),a=o(278),i=o(660),r=o(26),u=o(39),s=o(16),c=o(296),l=o.n(c),d=o(29),h=o(8),m=o(2),g=o(280),p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},f=p({},g.a,{"dispatchCommonSearch":function dispatchCommonSearch(e){return function(t){return new Promise(function(o,n){e?(t({"type":m.a.GLOBAL.COMMON_SEARCH_BEGIN}),h.a.commonSearch(e).then(function(e){t({"type":m.a.GLOBAL.COMMON_SEARCH_SUCCESS,"data":p({},e)}),o(e)}).catch(function(e){console.log(e),t({"type":m.a.GLOBAL.COMMON_SEARCH_FAIL}),n(e)})):t({"type":m.a.GLOBAL.COMMON_SEARCH_CLEAR})})}}}),k=o(279),C=(o(560),o(277)),y=o(19),E=o(13),P=function(){function defineProperties(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,o){return t&&defineProperties(e.prototype,t),o&&defineProperties(e,o),e}}(),T=function get(e,t,o){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var a=Object.getPrototypeOf(e);return null===a?void 0:get(a,t,o)}if("value"in n)return n.value;var i=n.get;return void 0!==i?i.call(o):void 0},v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e};var O=function(e){function DiscoverPage(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,DiscoverPage);var t=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(DiscoverPage.__proto__||Object.getPrototypeOf(DiscoverPage)).call(this,e));return t.needClearWhenHide=!0,t.onSearchClick=t.onSearchClick.bind(t),t.goToCalender=t.goToCalender.bind(t),t.goToExamArrangement=t.goToExamArrangement.bind(t),t.goToLibrary=t.goToLibrary.bind(t),t.goToMyClassmates=t.goToMyClassmates.bind(t),t.goToScores=t.goToScores.bind(t),t.goToStuNotice=t.goToStuNotice.bind(t),t.goToDriftBottle=t.goToDriftBottle.bind(t),t._showSearchResult=t._showSearchResult.bind(t),t.handleSearchChange=l()(t.handleSearchChange,500).bind(t),t.handleOnNewsItemClick=t.handleOnNewsItemClick.bind(t),t.handleOnCourseItemClick=t.handleOnCourseItemClick.bind(t),t.handleOnStudentClick=t.handleOnStudentClick.bind(t),t}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(DiscoverPage,d["a"]),P(DiscoverPage,[{"key":"componentDidHide","value":function componentDidHide(){this.needClearWhenHide&&this.props.dispatchCommonSearch(""),this.needClearWhenHide=!0}},{"key":"componentDidShow","value":function componentDidShow(){h.a.socketIOHelper&&h.a.socketIOHelper.updateTabBarBargeState()}},{"key":"onSearchClick","value":function onSearchClick(e){d.a.successMessage("搜索"),console.log(e)}},{"key":"goToMyClassmates","value":function goToMyClassmates(){y.a.navigateTo(y.a.Pages.MyClassmatesPage)}},{"key":"goToLibrary","value":function goToLibrary(){y.a.navigateTo(y.a.Pages.DiscoverLibraryPage)}},{"key":"goToDriftBottle","value":function goToDriftBottle(){y.a.navigateTo(y.a.Pages.DiscoverDriftBottlePage)}},{"key":"goToScores","value":function goToScores(){y.a.navigateTo(y.a.Pages.CourseScorePage)}},{"key":"goToExamArrangement","value":function goToExamArrangement(){y.a.navigateTo(y.a.Pages.ExamArrangementPage)}},{"key":"goToStuNotice","value":function goToStuNotice(){h.a.socketIOHelper&&h.a.socketIOHelper.clearNotification(E.a.Protocol.STU_NOTICE),y.a.navigateTo(y.a.Pages.StuNoticePage)}},{"key":"goToCalender","value":function goToCalender(){y.a.navigateTo(y.a.Pages.CalenderPage)}},{"key":"handleSearchChange","value":function handleSearchChange(e){this.props.dispatchCommonSearch(e)}},{"key":"_showSearchResult","value":function _showSearchResult(){return!(this.props.students&&this.props.students.length<=0&&this.props.officials&&this.props.officials.length<=0&&this.props.courses&&this.props.courses.length<=0&&this.props.news&&this.props.news.length<=0)}},{"key":"handleOnCourseItemClick","value":function handleOnCourseItemClick(e){this.needClearWhenHide=!1,this.props.dispatchGotoCourseDetail(2,[e])}},{"key":"handleOnNewsItemClick","value":function handleOnNewsItemClick(e){this.needClearWhenHide=!1,this.props.dispatchGotoNoticeDetail(e)}},{"key":"handleOnStudentClick","value":function handleOnStudentClick(e){this.needClearWhenHide=!1,this.props.dispatchGoToPersonDetail(e)}},{"key":"render","value":function render(){var e=this,t=C.a.Images.icon_bottle,a=C.a.Images.icon_myclassmates,u=C.a.Images.icon_library,s=C.a.Images.icon_grade,c=C.a.Images.icon_examroom,l=C.a.Images.icon_news,d=C.a.Images.icon_calendar,h=this.props,m=h.students,g=h.courses,p=h.news,f=h.showCourseScoreRedDot,y=h.showDriftBottleRedDot,E=h.showLibraryRedDot,P=h.showStuNoticeRedDot,T=h.showExamArrangementsRedDot,v=this._showSearchResult();return n.k.createElement(i.a,null,n.k.createElement(k.b,{"title":"发现"}),n.k.createElement(k.j,null,n.k.createElement(k.B,{"placeholder":"搜索课程 / 任课老师 / 周知","onChange":this.handleSearchChange}),!v&&n.k.createElement(i.a,null,n.k.createElement(r.a,{"className":"menu-1 discover-header"},n.k.createElement(k.w,{"showRedDot":y,"icon":t,"title":"漂流瓶","bodyStyle":"padding: 0;","showHoverClass":!1,"onMenuItemClick":this.goToDriftBottle}),n.k.createElement(k.w,{"icon":a,"title":"我的同学","bodyStyle":"padding: 0;","showHoverClass":!1,"onMenuItemClick":this.goToMyClassmates})),n.k.createElement(r.a,{"className":"menu-1"},n.k.createElement(k.w,{"showRedDot":E,"icon":u,"title":"图书馆","onMenuItemClick":this.goToLibrary})),n.k.createElement(r.a,{"className":"menu-1"},n.k.createElement(r.a,{"className":"divider-line"}),n.k.createElement(k.w,{"showRedDot":f,"icon":s,"title":"考试成绩","onMenuItemClick":this.goToScores}),n.k.createElement(r.a,{"className":"divider-line"}),n.k.createElement(k.w,{"showRedDot":T,"icon":c,"title":"考场安排","onMenuItemClick":this.goToExamArrangement})),n.k.createElement(r.a,{"className":"menu-1"},n.k.createElement(k.w,{"showRedDot":P,"icon":l,"title":"学生周知","onMenuItemClick":this.goToStuNotice}),n.k.createElement(r.a,{"className":"divider-line"}),n.k.createElement(k.w,{"icon":d,"title":"校历","onMenuItemClick":this.goToCalender}))),v&&n.k.createElement(i.a,null,g.map(function(t){return n.k.createElement(k.i,{"onItemClick":e.handleOnCourseItemClick,"key":t.CourseId,"img":o(562),"title":t.Name,"description":"No."+t.CourseNumber+" "+t.Teacher,"item":t})}),p.map(function(t){return n.k.createElement(k.i,{"onItemClick":e.handleOnNewsItemClick,"key":t.id,"img":t.img,"title":t.title,"description":t.description,"item":t})}),m.map(function(t){return n.k.createElement(k.i,{"onItemClick":e.handleOnStudentClick,"key":t.user_id,"img":t.head_img,"title":t.real_name,"description":t.university+" "+t.department,"item":t})}))))}},{"key":"componentDidMount","value":function componentDidMount(){T(DiscoverPage.prototype.__proto__||Object.getPrototypeOf(DiscoverPage.prototype),"componentDidMount",this)&&T(DiscoverPage.prototype.__proto__||Object.getPrototypeOf(DiscoverPage.prototype),"componentDidMount",this).call(this)}}]),DiscoverPage}();O=a.a([Object(u.b)(function mapStateToProps(e){return v({},e.DiscoverReducer.toJS())},function mapDispatchToProps(e){return v({},Object(s.b)(f,e))})],O);t.default=O}}]);